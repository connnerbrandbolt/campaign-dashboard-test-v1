// Replace your current generateCampaignData function with this one:

function generateCampaignData(count = 100) {
    const campaigns = [];
    const lowRoasCampaigns = [];
    
    // First generate all campaigns
    for (let i = 0; i < count; i++) {
        const accountIndex = Math.floor(Math.random() * accountNames.length);
        const campaignTypeIndex = Math.floor(Math.random() * campaignTypes.length);
        const statusIndex = Math.floor(Math.random() * statusOptions.length);
        
        // Generate campaign name with sequential numbering
        const campaignNumber = i + 1;
        const campaignName = campaignTypes[campaignTypeIndex].replace("{num}", campaignNumber);
        
        // Generate realistic cost (between $50 and $2000)
        const cost = Math.random() * 1950 + 50;
        
        // Generate ROAS with higher likelihood of being around 1.3
        let roas;
        const roasDistribution = Math.random();
        if (roasDistribution < 0.3) {
            // 30% chance of being below target (0.8-1.2)
            roas = Math.random() * 0.4 + 0.8;
        } else if (roasDistribution < 0.7) {
            // 40% chance of being around target (1.2-1.4)
            roas = Math.random() * 0.2 + 1.2;
        } else {
            // 30% chance of being above target (1.4-2.0)
            roas = Math.random() * 0.6 + 1.4;
        }
        
        const revenue = cost * roas;
        
        // Set all campaigns active by default
        const active = true;
        
        const campaign = {
            id: i,
            account: accountNames[accountIndex],
            campaign: campaignName,
            status: statusOptions[statusIndex],
            cost,
            revenue,
            roas,
            active,
            lastUpdated: new Date(Date.now() - Math.random() * 86400000) // Random time in last 24h
        };
        
        campaigns.push(campaign);
        
        // If this campaign has ROAS < 1.1, add it to our potential turn-off list
        if (roas < 1.1) {
            lowRoasCampaigns.push(i); // Store the index
        }
    }
    
    // Randomly select 10 campaigns with ROAS < 1.1 to turn off
    // If we don't have 10 low ROAS campaigns, use what we have
    const numToTurnOff = Math.min(10, lowRoasCampaigns.length);
    
    // Shuffle the low ROAS campaigns array using Fisher-Yates algorithm
    for (let i = lowRoasCampaigns.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [lowRoasCampaigns[i], lowRoasCampaigns[j]] = [lowRoasCampaigns[j], lowRoasCampaigns[i]];
    }
    
    // Turn off the first 10 (or fewer) campaigns from our shuffled list
    for (let i = 0; i < numToTurnOff; i++) {
        const campaignIndex = lowRoasCampaigns[i];
        campaigns[campaignIndex].active = false;
    }
    
    console.log(`Generated ${campaigns.length} campaigns with ${numToTurnOff} low ROAS campaigns turned OFF`);
    return campaigns;
}
